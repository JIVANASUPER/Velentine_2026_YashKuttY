<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>A Question For You ğŸ’™</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Italiana&family=DM+Sans:wght@300;400&display=swap" rel="stylesheet">
<style>
  :root {
    --blue: #a8c8f8;
    --blush: #f9d7e3;
    --gold: #d4a96a;
    --bg: #0d0820;
    --cream: #fff8f0;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--cream);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    cursor: none;
    user-select: none;
  }

  /* â”€â”€ CURSOR â”€â”€ */
  .cursor {
    width: 10px; height: 10px;
    background: var(--blue); border-radius: 50%;
    position: fixed; pointer-events: none; z-index: 9999;
    transform: translate(-50%,-50%); mix-blend-mode: screen;
    transition: width 0.2s, height 0.2s;
  }
  .cursor-ring {
    width: 32px; height: 32px;
    border: 1px solid rgba(168,200,248,0.45); border-radius: 50%;
    position: fixed; pointer-events: none; z-index: 9998;
    transform: translate(-50%,-50%);
    transition: left 0.1s ease-out, top 0.1s ease-out;
  }

  /* â”€â”€ STARS â”€â”€ */
  #stars { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

  /* â”€â”€ HEARTS BG â”€â”€ */
  .hearts-bg { position: fixed; inset: 0; z-index: 1; pointer-events: none; overflow: hidden; }
  .heart-float {
    position: absolute; bottom: -40px; opacity: 0;
    animation: floatUp linear infinite;
  }
  @keyframes floatUp {
    0%   { transform: translateY(0) rotate(-8deg); opacity: 0; }
    10%  { opacity: 0.35; }
    90%  { opacity: 0.15; }
    100% { transform: translateY(-110vh) rotate(12deg); opacity: 0; }
  }

  /* â”€â”€ MAIN CARD â”€â”€ */
  .card {
    position: relative; z-index: 10;
    text-align: center;
    padding: 56px 48px 52px;
    max-width: 480px; width: 90%;
    background: linear-gradient(145deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    border: 1px solid rgba(168,200,248,0.15);
    border-radius: 32px;
    backdrop-filter: blur(24px);
    box-shadow: 0 32px 80px rgba(0,0,0,0.4), 0 0 0 1px rgba(168,200,248,0.05);
    animation: cardIn 1s cubic-bezier(0.34,1.56,0.64,1) forwards;
  }
  @keyframes cardIn {
    from { opacity: 0; transform: translateY(40px) scale(0.92); }
    to   { opacity: 1; transform: translateY(0)    scale(1); }
  }
  .corner-tl, .corner-br {
    position: absolute; width: 48px; height: 48px; opacity: 0.18;
  }
  .corner-tl { top: 14px; left: 14px; border-top: 1px solid var(--blue); border-left: 1px solid var(--blue); }
  .corner-br { bottom: 14px; right: 14px; border-bottom: 1px solid var(--blue); border-right: 1px solid var(--blue); }

  /* â”€â”€ BEAR â”€â”€ */
  .bear {
    font-size: 5rem; display: block; margin-bottom: 8px;
    animation: bearBob 2.5s ease-in-out infinite;
    filter: drop-shadow(0 4px 16px rgba(168,200,248,0.3));
  }
  @keyframes bearBob {
    0%,100% { transform: translateY(0) rotate(-2deg); }
    50%      { transform: translateY(-8px) rotate(2deg); }
  }

  /* â”€â”€ TEXT â”€â”€ */
  .question-label {
    font-size: 0.68rem; letter-spacing: 0.38em; text-transform: uppercase;
    color: var(--gold); margin-bottom: 18px;
    animation: fadeUp 0.8s 0.4s both;
  }
  .question {
    font-family: 'Italiana', serif;
    font-size: clamp(2.4rem, 9vw, 3.8rem);
    line-height: 1.05; color: transparent;
    background: linear-gradient(135deg, #e8d5f5, var(--blue), var(--blush));
    -webkit-background-clip: text; background-clip: text;
    margin-bottom: 10px;
    animation: fadeUp 0.8s 0.6s both;
  }
  .question-sub {
    font-family: 'Cormorant Garamond', serif; font-style: italic;
    font-size: 1.05rem; color: rgba(255,255,255,0.45);
    margin-bottom: 40px;
    animation: fadeUp 0.8s 0.8s both;
  }

  /* â”€â”€ BUTTONS â”€â”€ */
  .buttons {
    display: flex; gap: 16px; justify-content: center; align-items: center;
    animation: fadeUp 0.8s 1s both;
  }

  .btn-yes {
    font-family: 'DM Sans', sans-serif;
    background: linear-gradient(135deg, #a8c8f8, #7fb3f5);
    color: #0d0820; font-weight: 600;
    font-size: 1rem; letter-spacing: 0.05em;
    padding: 14px 40px; border-radius: 50px;
    border: none; cursor: pointer;
    box-shadow: 0 8px 24px rgba(168,200,248,0.3);
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative; z-index: 2;
  }
  .btn-yes:hover {
    transform: scale(1.08);
    box-shadow: 0 12px 36px rgba(168,200,248,0.45);
  }
  .btn-yes:active { transform: scale(0.96); }

  /* No button lives OUTSIDE the card, always fixed on the page */
  .btn-no {
    font-family: 'DM Sans', sans-serif;
    background: transparent;
    color: rgba(255,255,255,0.35);
    font-size: 0.9rem; letter-spacing: 0.04em;
    padding: 14px 28px; border-radius: 50px;
    border: 1px solid rgba(255,255,255,0.1);
    cursor: pointer;
    white-space: nowrap;
    position: fixed;
    z-index: 200;
    transition: left 0.22s cubic-bezier(0.34,1.2,0.64,1),
                top  0.22s cubic-bezier(0.34,1.2,0.64,1);
  }

  /* â”€â”€ NO BUTTON â€” desktop run-away messages â”€â”€ */
  .no-excuse {
    font-family: 'Cormorant Garamond', serif; font-style: italic;
    font-size: 0.85rem; color: rgba(168,200,248,0.4);
    margin-top: 18px; min-height: 22px;
    animation: fadeUp 0.3s ease;
  }

  /* â”€â”€ YES STATE â”€â”€ */
  .yes-state {
    display: none;
    flex-direction: column; align-items: center;
    animation: popIn 0.6s cubic-bezier(0.34,1.56,0.64,1) forwards;
  }
  .yes-state.show { display: flex; }
  @keyframes popIn {
    from { opacity: 0; transform: scale(0.7); }
    to   { opacity: 1; transform: scale(1); }
  }
  .yes-bear { font-size: 5.5rem; animation: happyBear 0.5s ease infinite alternate; }
  @keyframes happyBear {
    from { transform: rotate(-8deg) scale(1); }
    to   { transform: rotate(8deg) scale(1.08); }
  }
  .yes-title {
    font-family: 'Italiana', serif;
    font-size: clamp(2.2rem, 8vw, 3.4rem);
    color: transparent;
    background: linear-gradient(135deg, var(--blush), var(--blue));
    -webkit-background-clip: text; background-clip: text;
    margin: 14px 0 8px;
  }
  .yes-sub {
    font-family: 'Cormorant Garamond', serif; font-style: italic;
    font-size: 1.05rem; color: rgba(255,255,255,0.5);
    margin-bottom: 20px;
  }
  .yes-link {
    font-size: 0.7rem; letter-spacing: 0.2em; text-transform: uppercase;
    color: var(--gold); text-decoration: none;
    border-bottom: 1px solid rgba(212,169,106,0.3);
    padding-bottom: 2px;
    transition: color 0.2s, border-color 0.2s;
  }
  .yes-link:hover { color: var(--blush); border-color: var(--blush); }

  /* â”€â”€ MOBILE OVERLAY â”€â”€ */
  .mobile-overlay {
    display: none;
    position: fixed; inset: 0; z-index: 500;
    background: rgba(13,8,32,0.92);
    backdrop-filter: blur(16px);
    flex-direction: column; align-items: center; justify-content: center;
    text-align: center; padding: 40px 32px;
    animation: fadeIn 0.35s ease;
  }
  .mobile-overlay.show { display: flex; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .overlay-emoji { font-size: 4rem; margin-bottom: 16px; animation: shake 0.5s ease infinite alternate; }
  @keyframes shake {
    from { transform: rotate(-6deg); }
    to   { transform: rotate(6deg); }
  }
  .overlay-title {
    font-family: 'Italiana', serif; font-size: 2.4rem;
    color: var(--blue); margin-bottom: 10px;
  }
  .overlay-text {
    font-family: 'Cormorant Garamond', serif; font-style: italic;
    font-size: 1.1rem; color: rgba(255,255,255,0.55);
    margin-bottom: 32px; line-height: 1.7;
  }
  .overlay-yes {
    font-family: 'DM Sans', sans-serif;
    background: linear-gradient(135deg, #a8c8f8, #7fb3f5);
    color: #0d0820; font-weight: 700;
    font-size: 1.1rem; padding: 16px 52px;
    border-radius: 50px; border: none; cursor: pointer;
    box-shadow: 0 8px 32px rgba(168,200,248,0.35);
    animation: pulse 1s ease-in-out infinite;
  }
  @keyframes pulse {
    0%,100% { transform: scale(1);    box-shadow: 0 8px 32px rgba(168,200,248,0.35); }
    50%      { transform: scale(1.05); box-shadow: 0 12px 40px rgba(168,200,248,0.55); }
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 500px) {
    .card { padding: 44px 28px 40px; }
  }
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursor-ring"></div>
<canvas id="stars"></canvas>
<div class="hearts-bg" id="hearts-bg"></div>

<!-- Mobile "No" overlay -->
<div class="mobile-overlay" id="mobile-overlay">
  <div class="overlay-emoji">ğŸ¥º</div>
  <p class="overlay-title">Nope, not today.</p>
  <p class="overlay-text">
    That button doesn't work here.<br>
    There's only one right answer, baby â€”
  </p>
  <button class="overlay-yes" onclick="sayYes()">
    Okay fineâ€¦ YES ğŸ’™
  </button>
</div>

<!-- No button lives outside the card â€” positioned below it via JS on load -->
<button class="btn-no" id="btn-no" onmouseenter="runAway()" onclick="noClicked()">No</button>

<!-- Main card -->
<div class="card" id="main-card">
  <div class="corner-tl"></div>
  <div class="corner-br"></div>

  <!-- Question state -->
  <div id="question-state">
    <span class="bear" id="bear-emoji">ğŸ»</span>
    <p class="question-label">a very important question</p>
    <h1 class="question">Will you be my Valentine?</h1>
    <p class="question-sub">think carefullyâ€¦ ğŸ¥º</p>

    <div class="buttons" id="buttons-wrap">
      <button class="btn-yes" onclick="sayYes()">Yes ğŸ’™</button>
    </div>

    <p class="no-excuse" id="no-excuse"></p>
  </div>

  <!-- Yes state (hidden until Yes pressed) -->
  <div class="yes-state" id="yes-state">
    <span class="yes-bear">ğŸ¥°</span>
    <h2 class="yes-title">She said Yes!</h2>
    <p class="yes-sub">I knew you wouldâ€¦ you always make me smile ğŸ’™</p>
    <a class="yes-link" href="yashi-valentine.html">open your surprise â†’</a>
  </div>
</div>

<script>
// â”€â”€ CURSOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const cur  = document.getElementById('cursor');
const ring = document.getElementById('cursor-ring');
document.addEventListener('mousemove', e => {
  cur.style.left  = e.clientX + 'px'; cur.style.top  = e.clientY + 'px';
  ring.style.left = e.clientX + 'px'; ring.style.top = e.clientY + 'px';
});

// â”€â”€ STARS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const cnv = document.getElementById('stars');
const ctx = cnv.getContext('2d');
let stars = [];
function initStars() {
  cnv.width = window.innerWidth; cnv.height = window.innerHeight;
  stars = Array.from({length: 160}, () => ({
    x: Math.random() * cnv.width, y: Math.random() * cnv.height,
    r: Math.random() * 1.3 + 0.2, o: Math.random(),
    s: Math.random() * 0.005 + 0.002, d: Math.random() > 0.5 ? 1 : -1
  }));
}
function drawStars() {
  ctx.clearRect(0,0,cnv.width,cnv.height);
  stars.forEach(s => {
    s.o += s.s * s.d; if (s.o>=1||s.o<=0) s.d*=-1;
    ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fillStyle = `rgba(200,220,255,${s.o})`; ctx.fill();
  });
  requestAnimationFrame(drawStars);
}
initStars(); drawStars();
window.addEventListener('resize', initStars);

// â”€â”€ FLOATING HEARTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const hbg   = document.getElementById('hearts-bg');
const hch   = ['ğŸ’™','ğŸ©µ','âœ¦','Â·','Ëš','â„'];
function spawnHeart() {
  const h = document.createElement('div');
  h.className   = 'heart-float';
  h.textContent = hch[Math.floor(Math.random() * hch.length)];
  h.style.left     = Math.random() * 100 + 'vw';
  h.style.fontSize = (Math.random() * 16 + 7) + 'px';
  const d = Math.random() * 12 + 7;
  h.style.animationDuration = d + 's';
  h.style.animationDelay    = Math.random() * -d + 's';
  hbg.appendChild(h); setTimeout(() => h.remove(), d * 1000);
}
for (let i=0; i<18; i++) spawnHeart();
setInterval(spawnHeart, 1000);

// â”€â”€ POSITION NO BUTTON initially below the card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function placeNoBtn() {
  const btn  = document.getElementById('btn-no');
  const card = document.getElementById('main-card');
  const cRect = card.getBoundingClientRect();
  const bw = btn.offsetWidth  || 90;
  const bh = btn.offsetHeight || 46;
  // Place it centered below the card
  const x = cRect.left + (cRect.width / 2) - (bw / 2);
  const y = cRect.bottom + 20;
  btn.style.left = x + 'px';
  btn.style.top  = y + 'px';
}
window.addEventListener('load', () => setTimeout(placeNoBtn, 100));
window.addEventListener('resize', placeNoBtn);


const isMobile = () => window.matchMedia('(hover: none) and (pointer: coarse)').matches;

// â”€â”€ NO BUTTON â€” run-away excuses â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const excuses = [
  "nice try ğŸ™ƒ",
  "that button doesn't workâ€¦",
  "psst â€” try the other one",
  "wrong choice, babe",
  "nope. try again ğŸ’™",
  "you sure? ğŸ¥º",
  "still no? really?",
  "okay last chanceâ€¦",
  "i'm not giving up ğŸ’™",
  "just say yes already!!"
];
let noCount    = 0;
let isRunning  = false;

function runAway() {
  if (isMobile()) return;
  const btn  = document.getElementById('btn-no');
  const card = document.getElementById('main-card');

  // Get card bounds to avoid â€” expand by padding so button can't even graze it
  const cRect = card.getBoundingClientRect();
  const avoid = {
    left:   cRect.left   - 24,
    right:  cRect.right  + 24,
    top:    cRect.top    - 24,
    bottom: cRect.bottom + 24
  };

  const bw = btn.offsetWidth  || 90;
  const bh = btn.offsetHeight || 46;
  const edge = 20; // min distance from screen edge

  // Build a list of safe zones (4 corners + edges away from card)
  const safeZones = [
    // top-left corner
    { x: [edge, avoid.left - bw - edge],          y: [edge, avoid.top - bh - edge] },
    // top-right corner
    { x: [avoid.right + edge, window.innerWidth - bw - edge],  y: [edge, avoid.top - bh - edge] },
    // bottom-left corner
    { x: [edge, avoid.left - bw - edge],          y: [avoid.bottom + edge, window.innerHeight - bh - edge] },
    // bottom-right corner
    { x: [avoid.right + edge, window.innerWidth - bw - edge],  y: [avoid.bottom + edge, window.innerHeight - bh - edge] },
    // top strip (above card, full width)
    { x: [edge, window.innerWidth - bw - edge],   y: [edge, avoid.top - bh - edge] },
    // bottom strip (below card, full width)
    { x: [edge, window.innerWidth - bw - edge],   y: [avoid.bottom + edge, window.innerHeight - bh - edge] },
  ];

  // Filter to zones that have valid range (positive width & height)
  const valid = safeZones.filter(z => z.x[1] > z.x[0] && z.y[1] > z.y[0]);

  let newX, newY;
  if (valid.length > 0) {
    // Pick a random valid zone
    const zone = valid[Math.floor(Math.random() * valid.length)];
    newX = zone.x[0] + Math.random() * (zone.x[1] - zone.x[0]);
    newY = zone.y[0] + Math.random() * (zone.y[1] - zone.y[0]);
  } else {
    // Fallback: far corner
    newX = window.innerWidth  - bw  - edge;
    newY = window.innerHeight - bh  - edge;
  }

  // Clamp to viewport just in case
  newX = Math.max(edge, Math.min(newX, window.innerWidth  - bw  - edge));
  newY = Math.max(edge, Math.min(newY, window.innerHeight - bh  - edge));

  btn.style.left = newX + 'px';
  btn.style.top  = newY + 'px';

  // Update bear expression
  const bears = ['ğŸ»','ğŸ˜¤','ğŸ™ˆ','ğŸ˜…','ğŸ«£','ğŸ˜¬','ğŸ™ƒ','ğŸ˜µ','ğŸ¥º','ğŸ˜­'];
  document.getElementById('bear-emoji').textContent = bears[Math.min(noCount, bears.length-1)];

  // Show excuse
  const excuseEl = document.getElementById('no-excuse');
  excuseEl.textContent = excuses[Math.min(noCount, excuses.length-1)];
  excuseEl.style.animation = 'none';
  void excuseEl.offsetWidth;
  excuseEl.style.animation = '';

  noCount++;
}

function noClicked() {
  if (isMobile()) {
    // Show the overlay forcing Yes
    document.getElementById('mobile-overlay').classList.add('show');
  } else {
    runAway();
  }
}

// â”€â”€ YES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function sayYes() {
  // Hide overlay if showing
  document.getElementById('mobile-overlay').classList.remove('show');

  // Explosion of hearts
  for (let i = 0; i < 30; i++) {
    setTimeout(() => spawnHeart(), i * 60);
  }

  // Swap states
  document.getElementById('question-state').style.display = 'none';
  document.getElementById('yes-state').classList.add('show');

  // Remove the runaway no button from DOM if it escaped to fixed position
  const noBtn = document.getElementById('btn-no');
  if (noBtn) noBtn.remove();
}

// Make runAway globally accessible for link href trick
window.sayYes   = sayYes;
window.noClicked = noClicked;
window.runAway  = runAway;
</script>
</body>
</html>
